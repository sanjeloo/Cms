@model UsersViewModel
@{
    Layout = "_layout";
}

<div class="main-body">
    <div class="page-wrapper">
        <!-- Page-header start -->
        <div class="page-header">
            <div class="row align-items-end">
                <div class="col-lg-8">
                    <div class="page-header-title">
                        <div class="d-inline">
                         
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="page-header-breadcrumb">
                        <ul class="breadcrumb-title">
                            <li class="breadcrumb-item">
                                <a href="index-1.htm"> <i class="feather icon-home"></i> </a>
                            </li>
                            <li class="breadcrumb-item">
                                <a href="#!">مدیریت کاربران</a>
                            </li>
                            <li class="breadcrumb-item">
                                <a href="#!">لیست کاربران</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- Page-header end -->
        <!-- Page body start -->
        <div class="page-body">
            <div class="row">
                <div class="col-sm-12">
                    <!-- List view card start -->
                    <div class="card">
                        <div class="card-header">
                            <h5>لیست همه کاربران فعال</h5>

                        </div>
                        <div class="row card-block">
                            <div class="col-md-12">
                                <ul class="list-view">

                                    @foreach (var item in Model.userViewModel)
                                    {


                                        <li id="@item.UserName">
                                            <div class="card list-view-media">
                                                <div class="card-block">
                                                    <div class="media">
                                                        @if (string.IsNullOrEmpty(item.Photo))
                                                        {
                                                            <a class="media-left" href="#">
                                                                <img class="media-object card-list-img" src="\images\avatar-1.jpg" alt="Generic placeholder image">
                                                            </a>
                                                        }
                                                        else
                                                        {

                                                            <a class="media-left" href="#">
                                                                <img class="media-object card-list-img" src="\images\@item.Photo" alt="Generic placeholder image">
                                                            </a>
                                                        }

                                                        <div class="media-body ">
                                                            <div class="col-xs-12">
                                                                <h6 class="d-inline-block">
                                                                    @item.FirstName  @item.LastName
                                                                </h6>
                                                                <label class="label label-info">آنلاین</label>
                                                            </div>
                                                            <div id="username" class="f-13 text-muted m-b-15">
                                                                @item.UserName
                                                            </div>
                                                            <p>
                                                                سلام این توضیحات خلاصه ای است که درباره من در
                                                                داخل سایت اضافه شده است لطفا سعی کنید از اطلاعات من
                                                                برای موارد خاص استفاده کنید این اطلاعات خیلی برای من مهم هستند
                                                                باتشکر ادمین سامانه
                                                            </p>
                                                            <div class="m-t-15 ">
                                                                <button type="button" onclick="edituser('@item.UserName')" @*showmodal()*@ id="edit" data-toggle="tooltip" title="Edit" class="btn btn-linkedin btn-mini waves-effect waves-light">
                                                                    Edit
                                                                </button>
                                                                <button type="button" onclick="deleteuser('@item.UserName')" id="delete" data-toggle="tooltip" title="Delete" class="btn btn-dribbble btn-mini waves-effect waves-light">
                                                                    Delete
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </li>

                                    }


                                </ul>
                                <!-- Modal large-->
                                @*<button type="button"  class="btn btn-primary waves-effect" data-toggle="modal" data-target="#large-Modal">Large</button>*@
                                <partial name="EditUser" model="@Model.EditUser" />
                                <div hidden class="card-block">
                                    @*<p>use button<code> onclick="_gaq.push(['_trackEvent', 'example', 'try', 'sweet-1']);"</code> to use effect.</p>*@
                                    <ul>
                                        <li>
                                            <button type="button" class="btn btn-primary sweet-1 m-b-10" onclick="_gaq.push(['_trackEvent', 'example', 'try', 'sweet-1']);">Basic</button>
                                        </li>
                                        <li>
                                            <button type="button" class="btn btn-success alert-success-msg m-b-10" onclick="_gaq.push(['_trackEvent', 'example', 'try', 'alert-success']);">Success</button>
                                        </li>
                                        <li>
                                            <button type="button" class="btn btn-warning alert-confirm m-b-10" onclick="_gaq.push(['_trackEvent', 'example', 'try', 'alert-confirm']);">Confirm</button>
                                        </li>
                                        <li>
                                            <button type="button" class="btn btn-danger alert-success-cancel m-b-10" onclick="_gaq.push(['_trackEvent', 'example', 'try', 'alert-success-cancel']);">Success or Cancel</button>
                                        </li>
                                        <li>
                                            <button type="button" class="btn btn-primary alert-prompt m-b-10" onclick="_gaq.push(['_trackEvent', 'example', 'try', 'alert-prompt']);">Prompt</button>
                                        </li>
                                        <li>
                                            <button type="button" class="btn btn-success alert-ajax m-b-10" onclick="_gaq.push(['_trackEvent', 'example', 'try', 'alert-ajax']);">Ajax</button>
                                        </li>
                                    </ul>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!-- List view card end -->
                </div>
            </div>

        </div>
        <!-- Page body end -->
    </div>
</div>

@section Scripts
{
    <script>

        function dismismodal() {
            $('#loading').addClass('hide')
            debugger
        }
        function showmodal() {
            debugger

            $('#large-Modal').modal('show');
            $('#loading').removeClass('hide')
        }
        function deleteuser(el) {
            debugger;

            $.ajax({
                url: '/Manage/UserManagers/Delete',
                type: 'post',
                data: { username: el },
                success:
                    function (result) {
                        debugger;
                        if (result == true) {
                            $('#' + el + '').fadeOut('slow');
                        }

                    },
                error: function (result) {
                    console.log(result)
                },

            });
        }
        function edituser(username) {
            debugger;
            $('#loading').removeClass('hide')

            $.ajax({
                url: '/Manage/UserManagers/FindUserToEdit',
                type: 'post',
                data: { username: username },
                success:
                    function (result) {
                        debugger;
                        if (result.status == 200) {
                            $('#UserName').val(result.userName)
                            $('#FirstName').val(result.firstName)
                            $('#LastName').val(result.lastName)
                            $('#PhoneNumber').val(result.phoneNumber)
                            if (result.gender == 1)
                                $('#gender-1').val(result.gender).add('checked')
                            else
                                $('#gender-2').val(result.gender).add('checked')

                            $('#large-Modal').modal('show');
                            $('#loading').addClass('hide')

                        }
                        else {
                            //todo need to show alert
                        }
                    },
                error: function (result) {
                    console.log(result)
                },

            });
        }


    </script>
}